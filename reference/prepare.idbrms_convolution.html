<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Prepare data for fitting using a convolution model — prepare.idbrms_convolution • idbrms</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous" />

<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Prepare data for fitting using a convolution model — prepare.idbrms_convolution" />
<meta property="og:description" content="Prepare data for fitting using a convolution model" />






<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->




  

  

  </head>

  <body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">idbrms</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Prepare data for fitting using a convolution model</h1>
    
    <div class="hidden name"><code>prepare.idbrms_convolution.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Prepare data for fitting using a convolution model</p>
    </div>

    <div class="ref-usage sourceCode"><pre class='sourceCode r'><code><span class='co'># S3 method for idbrms_convolution</span>
<span class='fu'><a href='prepare.html'>prepare</a></span><span class='op'>(</span>
  <span class='va'>data</span>,
  <span class='va'>location</span>,
  <span class='va'>primary</span>,
  <span class='va'>secondary</span>,
  initial_obs <span class='op'>=</span> <span class='fl'>14</span>,
  max_convolution <span class='op'>=</span> <span class='fl'>30</span>,
  <span class='va'>...</span>
<span class='op'>)</span></code></pre></div>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>data</th>
      <td><p>A data frame containing at least two integer observations and a
date variable.</p></td>
    </tr>
    <tr>
      <th>location</th>
      <td><p>Character string, variable to use as the spatial location.</p></td>
    </tr>
    <tr>
      <th>primary</th>
      <td><p>Character string, variable to use as the primary observation.</p></td>
    </tr>
    <tr>
      <th>secondary</th>
      <td><p>Character string, variable to use as the secondary
observation.</p></td>
    </tr>
    <tr>
      <th>initial_obs</th>
      <td><p>Integer, number of observations to hold out from the
likelihood. This is useful as initially the outcome will depend on primary
data outside of the range of the training set and including this could bias
the estimated delay distribution. Defaults to 14 days.</p></td>
    </tr>
    <tr>
      <th>max_convolution</th>
      <td><p>Integer defining the maximum index to use for the
convolution. Defaults to 30 days.</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Additional arguments passed to model specific prepare functions</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="author"><a class="anchor" href="#author"></a>Author</h2>

    <p>Sam Abbott</p>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <div class="ref-examples sourceCode"><pre class='sourceCode r'><code><span class='r-in'><span class='co'># define some example data</span></span>
<span class='r-in'><span class='kw'><a href='https://rdrr.io/r/base/library.html'>library</a></span><span class='op'>(</span><span class='va'><a href='https://r-datatable.com'>data.table</a></span><span class='op'>)</span></span>
<span class='r-in'><span class='va'>dt</span> <span class='op'>&lt;-</span> <span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/data.table.html'>data.table</a></span><span class='op'>(</span></span>
<span class='r-in'>   region <span class='op'>=</span> <span class='st'>"France"</span>, cases <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fl'>10</span>, <span class='fl'>500</span>, by <span class='op'>=</span> <span class='fl'>10</span><span class='op'>)</span>,</span>
<span class='r-in'>   date <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/as.Date.html'>as.Date</a></span><span class='op'>(</span><span class='st'>"2020-10-01"</span><span class='op'>)</span>, by <span class='op'>=</span> <span class='st'>"days"</span>, length.out <span class='op'>=</span> <span class='fl'>50</span><span class='op'>)</span></span>
<span class='r-in'>   <span class='op'>)</span></span>
<span class='r-in'><span class='va'>dt</span> <span class='op'>&lt;-</span> <span class='va'>dt</span><span class='op'>[</span>, <span class='va'>deaths</span> <span class='op'>:=</span> <span class='fu'><a href='https://rdrr.io/r/base/integer.html'>as.integer</a></span><span class='op'>(</span><span class='fu'><a href='https://Rdatatable.gitlab.io/data.table/reference/shift.html'>shift</a></span><span class='op'>(</span><span class='va'>cases</span>, <span class='fl'>5</span><span class='op'>)</span> <span class='op'>*</span> <span class='fl'>0.1</span><span class='op'>)</span><span class='op'>]</span></span>
<span class='r-in'><span class='va'>dt</span> <span class='op'>&lt;-</span> <span class='va'>dt</span><span class='op'>[</span><span class='fu'><a href='https://rdrr.io/r/base/NA.html'>is.na</a></span><span class='op'>(</span><span class='va'>deaths</span><span class='op'>)</span>, <span class='va'>deaths</span> <span class='op'>:=</span> <span class='fl'>0</span><span class='op'>]</span></span>
<span class='r-in'></span>
<span class='r-in'><span class='va'>dt</span> <span class='op'>&lt;-</span> <span class='fu'><a href='prepare.html'>prepare</a></span><span class='op'>(</span></span>
<span class='r-in'>  <span class='va'>dt</span>, model <span class='op'>=</span> <span class='st'>"convolution"</span>, location <span class='op'>=</span> <span class='st'>"region"</span>,</span>
<span class='r-in'>  primary <span class='op'>=</span> <span class='st'>"cases"</span>, secondary <span class='op'>=</span> <span class='st'>"deaths"</span>,</span>
<span class='r-in'>  <span class='op'>)</span></span>
<span class='r-in'><span class='va'>dt</span><span class='op'>[</span><span class='op'>]</span></span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     location       date time index init_obs cstart cmax primary secondary</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  1:   France 2020-10-01    0     1        1      1    1      10         0</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  2:   France 2020-10-02    1     2        1      1    2      20         0</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  3:   France 2020-10-03    2     3        1      1    3      30         0</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  4:   France 2020-10-04    3     4        1      1    4      40         0</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  5:   France 2020-10-05    4     5        1      1    5      50         0</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  6:   France 2020-10-06    5     6        1      1    6      60         1</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  7:   France 2020-10-07    6     7        1      1    7      70         2</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  8:   France 2020-10-08    7     8        1      1    8      80         3</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>  9:   France 2020-10-09    8     9        1      1    9      90         4</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 10:   France 2020-10-10    9    10        1      1   10     100         5</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 11:   France 2020-10-11   10    11        1      1   11     110         6</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 12:   France 2020-10-12   11    12        1      1   12     120         7</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 13:   France 2020-10-13   12    13        1      1   13     130         8</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 14:   France 2020-10-14   13    14        1      1   14     140         9</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 15:   France 2020-10-15   14    15        0      1   15     150        10</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 16:   France 2020-10-16   15    16        0      1   16     160        11</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 17:   France 2020-10-17   16    17        0      1   17     170        12</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 18:   France 2020-10-18   17    18        0      1   18     180        13</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 19:   France 2020-10-19   18    19        0      1   19     190        14</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 20:   France 2020-10-20   19    20        0      1   20     200        15</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 21:   France 2020-10-21   20    21        0      1   21     210        16</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 22:   France 2020-10-22   21    22        0      1   22     220        17</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 23:   France 2020-10-23   22    23        0      1   23     230        18</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 24:   France 2020-10-24   23    24        0      1   24     240        19</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 25:   France 2020-10-25   24    25        0      1   25     250        20</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 26:   France 2020-10-26   25    26        0      1   26     260        21</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 27:   France 2020-10-27   26    27        0      1   27     270        22</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 28:   France 2020-10-28   27    28        0      1   28     280        23</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 29:   France 2020-10-29   28    29        0      1   29     290        24</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 30:   France 2020-10-30   29    30        0      1   30     300        25</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 31:   France 2020-10-31   30    31        0      1   31     310        26</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 32:   France 2020-11-01   31    32        0      2   31     320        27</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 33:   France 2020-11-02   32    33        0      3   31     330        28</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 34:   France 2020-11-03   33    34        0      4   31     340        29</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 35:   France 2020-11-04   34    35        0      5   31     350        30</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 36:   France 2020-11-05   35    36        0      6   31     360        31</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 37:   France 2020-11-06   36    37        0      7   31     370        32</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 38:   France 2020-11-07   37    38        0      8   31     380        33</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 39:   France 2020-11-08   38    39        0      9   31     390        34</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 40:   France 2020-11-09   39    40        0     10   31     400        35</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 41:   France 2020-11-10   40    41        0     11   31     410        36</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 42:   France 2020-11-11   41    42        0     12   31     420        37</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 43:   France 2020-11-12   42    43        0     13   31     430        38</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 44:   France 2020-11-13   43    44        0     14   31     440        39</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 45:   France 2020-11-14   44    45        0     15   31     450        40</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 46:   France 2020-11-15   45    46        0     16   31     460        41</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 47:   France 2020-11-16   46    47        0     17   31     470        42</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 48:   France 2020-11-17   47    48        0     18   31     480        43</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 49:   France 2020-11-18   48    49        0     19   31     490        44</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span> 50:   France 2020-11-19   49    50        0     20   31     500        45</span>
<span class='r-out co'><span class='r-pr'>#&gt;</span>     location       date time index init_obs cstart cmax primary secondary</span>
</code></pre></div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p><p>Developed by Sam Abbott, Sebastian Funk.</p></p>
</div>

<div class="pkgdown">
  <p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 1.6.1.9001.</p></p>
</div>

      </footer>
   </div>

  


  

  </body>
</html>


